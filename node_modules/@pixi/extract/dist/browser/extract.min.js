/*!
 * @pixi/extract - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
this.PIXI=this.PIXI||{};var _pixi_extract=function(e,t,r,n){"use strict";var a=new r.Rectangle,i=function(){function e(e){this.renderer=e}return e.prototype.image=function(e,t,r){var n=new Image;return n.src=this.base64(e,t,r),n},e.prototype.base64=function(e,t,r){return this.canvas(e).toDataURL(t,r)},e.prototype.canvas=function(r,i){var o,u,d=this.renderer,h=!1,s=!1;r&&(r instanceof n.RenderTexture?u=r:(u=this.renderer.generateTexture(r),s=!0)),u?(o=u.baseTexture.resolution,i=null!=i?i:u.frame,h=!1,d.renderTexture.bind(u)):(o=d.resolution,i||((i=a).width=d.width,i.height=d.height),h=!0,d.renderTexture.bind(null));var c=Math.round(i.width*o),x=Math.round(i.height*o),l=new t.CanvasRenderTarget(c,x,1),g=new Uint8Array(4*c*x),v=d.gl;v.readPixels(Math.round(i.x*o),Math.round(i.y*o),c,x,v.RGBA,v.UNSIGNED_BYTE,g);var y=l.context.getImageData(0,0,c,x);if(e.arrayPostDivide(g,y.data),l.context.putImageData(y,0,0),h){var I=new t.CanvasRenderTarget(l.width,l.height,1);I.context.scale(1,-1),I.context.drawImage(l.canvas,0,-x),l.destroy(),l=I}return s&&u.destroy(!0),l.canvas},e.prototype.pixels=function(t,r){var i,o,u=this.renderer,d=!1;t&&(t instanceof n.RenderTexture?o=t:(o=this.renderer.generateTexture(t),d=!0)),o?(i=o.baseTexture.resolution,r=null!=r?r:o.frame,u.renderTexture.bind(o)):(i=u.resolution,r||((r=a).width=u.width,r.height=u.height),u.renderTexture.bind(null));var h=Math.round(r.width*i),s=Math.round(r.height*i),c=new Uint8Array(4*h*s),x=u.gl;return x.readPixels(Math.round(r.x*i),Math.round(r.y*i),h,s,x.RGBA,x.UNSIGNED_BYTE,c),d&&o.destroy(!0),e.arrayPostDivide(c,c),c},e.prototype.destroy=function(){this.renderer=null},e.arrayPostDivide=function(e,t){for(var r=0;r<e.length;r+=4){var n=t[r+3]=e[r+3];0!==n?(t[r]=Math.round(Math.min(255*e[r]/n,255)),t[r+1]=Math.round(Math.min(255*e[r+1]/n,255)),t[r+2]=Math.round(Math.min(255*e[r+2]/n,255))):(t[r]=e[r],t[r+1]=e[r+1],t[r+2]=e[r+2])}},e.extension={name:"extract",type:n.ExtensionType.RendererPlugin},e}();return e.Extract=i,Object.defineProperty(e,"__esModule",{value:!0}),e}({},PIXI.utils,PIXI,PIXI);Object.assign(this.PIXI,_pixi_extract);
//# sourceMappingURL=extract.min.js.map
